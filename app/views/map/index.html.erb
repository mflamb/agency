
<h2>Philly Grid</h2>

<div id="map" class="map">
  <script>


    var layers = {//this will be an object where we can call on each layer to be displayed by running a function that activates them
    }

    var neighborhoods_source = new ol.source.Vector({
        url: 'https://raw.githubusercontent.com/azavea/geo-data/master/Neighborhoods_Philadelphia/Neighborhoods_Philadelphia.geojson',
        format: new ol.format.GeoJSON()
    });

    var neighborhoods_layer = new ol.layer.Vector({
        source: neighborhoods_source
    });


    var affordable_source = new ol.source.Vector({
        url: 'https://phl.carto.com/api/v2/sql?q=SELECT+*+FROM+affordablehousingproduction&filename=affordablehousingproduction&format=geojson&skipfields=cartodb_id',
        format: new ol.format.GeoJSON()
    });
    var affordable_layer = new ol.layer.Vector({
        source: affordable_source
    });

    var housing_counseling_source = new ol.source.Vector({
        url: 'http://data.phl.opendata.arcgis.com/datasets/3265538198254e9fb6a8974745adab51_0.geojson',
        format: new ol.format.GeoJSON()
    });
    var housing_counseling_layer = new ol.layer.Vector({
        source: housing_counseling_source
    });

    var map = new ol.Map({
        target: 'map',
        layers: [
            new ol.layer.Tile({
                source: new ol.source.OSM()
            }),
            neighborhoods_layer, housing_counseling_layer,affordable_layer, 


        ],
        view: new ol.View({
            center: ol.proj.fromLonLat([-75.166923, 39.955948]),
            zoom: 13
        })

    });
  // geojson parsing objects for each layer here:
    var neighborhood_geojson = <%= @nei_response.html_safe %>;
    console.log(neighborhood_geojson);

    var counseling_geojson = <%= @counsel_response.html_safe %>;
    console.log(counseling_geojson);
        
  </script>
</div>

<div id="test" class="test"></div>
